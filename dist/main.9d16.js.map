{"version":3,"sources":["webpack:///./lib/date-range-picker.js","webpack:///./src/index.js"],"names":["nextMonth","date","newDate","Date","getMonth","setFullYear","getFullYear","setMonth","monthsIndex","0","1","2","3","4","5","6","7","8","9","10","11","days","date_range_picker_month","[object Object]","dom","state","attrs","month","id","className","initialDate","classList","add","parentElement","Promise","resolve","setTimeout","remove","year","push","setDate","getDate","getDaysInMonth","startDay","getDay","empties","Array","fill","view","arrival","departure","mithril_default","map","d","date_range_picker_date","class","a","dep","setHours","createDateClass","lib_date_range_picker","document","removeEventListener","close","data","arrivalProp","departureProp","show","stream_default","toggle","e","activeElement","contains","redraw","addEventListener","monthOne","monthTwo","months","key","getTime","undefined","movement","placeholder","onclick","stopPropagation","onfocus","onbeforeremove","prevMonth","mon","trip","location","arrivalDate","departureDate","src_demo","vnode","JSON","stringify","mount","body"],"mappings":"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","file":"main.9d16.js","sourcesContent":["import m from 'mithril'\nimport stream from 'mithril/stream'\nimport './date-range-picker.css'\n\nfunction prevMonth(date){\n    const newDate = new Date()\n    if (date.getMonth() > 0){\n        newDate.setFullYear(date.getFullYear())\n        newDate.setMonth(date.getMonth() - 1)\n    } else {\n        newDate.setMonth(11)\n        newDate.setFullYear(date.getFullYear() - 1)\n    }\n    return newDate\n}\n\nfunction nextMonth(date){\n    const newDate = new Date()\n    if (date.getMonth() < 11){\n        newDate.setFullYear(date.getFullYear())\n        newDate.setMonth(date.getMonth() + 1)\n    } else {\n        newDate.setMonth(0)\n        newDate.setFullYear(date.getFullYear() + 1)\n    }\n    return newDate\n}\n\nconst monthsIndex = {\n    0: 'January',\n    1: 'February',\n    2: 'March',\n    3: 'April',\n    4: 'May',\n    5: 'June',\n    6: 'July',\n    7: 'August',\n    8: 'September',\n    9: 'October',\n    10: 'November',\n    11: 'December'\n}\n\nconst days = ['Su', 'M', 'Tu', 'W', 'Th', 'F', 'Sa']\n\nfunction getDaysInMonth(month, year) {\n    var date = new Date(year, month, 1);\n    var days = [];\n    while (date.getMonth() === month) {\n       days.push(new Date(date));\n       date.setDate(date.getDate() + 1);\n    }\n    return days;\n}\n\n\nconst month = {\n    onbeforeremove({dom, state, attrs: {month, id}}){\n        const className = month() < state.initialDate ? 'right' : 'left'\n        dom.classList.add('out-' + className)\n        dom.parentElement.classList.add('in-' + className)\n        return new Promise(resolve => {\n            setTimeout(() => {\n                dom.parentElement.classList.remove('in-' + className)\n                resolve()\n            }, 300)\n        })\n    },\n    oninit({state, attrs: {month, id}}){\n        state.initialDate = month()\n        state.days = getDaysInMonth(month().getMonth(), month().getFullYear())\n        state.startDay = state.days[0].getDay()\n        state.empties = new Array(state.startDay).fill(0)\n        state.id = id\n    },\n    view ({state, attrs: {month, id, arrival, departure}}) {\n        return m(`.month.month-${id}`, [\n            m('h5', monthsIndex[month().getMonth()]),\n            m('.month-grid', [\n                m('.days', days.map(d => {\n                    return m('.day', d)\n                })),\n                m('.dates', [\n                    state.empties.map(() => {\n                        return m('.empty-date')\n                    }),\n                    state.days.map(d => {\n                        return m(date, {\n                            date: d,\n                            arrival,\n                            departure\n                        })\n                    })\n                ])\n            ])\n        ])\n    }\n}\n\nconst createDateClass = (d, a, dep) => {\n    const date = d.setHours(0,0,0,0)\n    const arrival = a() ? a().setHours(0,0,0,0) : ''\n    const departure = dep() ? dep().setHours(0,0,0,0) : ''\n    if (date == arrival){\n        return 'arrival'\n    } else if (date == departure){\n        return 'departure'\n    }\n    if (date > arrival && date < departure){\n        return 'selected'\n    }\n}\n\nconst date = {\n    view({attrs: {date, arrival, departure}}){\n        return m('.date', {\n            class: createDateClass(date, arrival, departure),\n            onclick(){\n                if (!arrival()){\n                    arrival(date)\n                } else if (arrival() && !departure()){\n                    departure(date)\n                } else if (arrival() && departure()){\n                    arrival(date)\n                    departure(null)\n                }\n            }\n        }, date.getDate())\n    }\n}\n\nexport default {\n    onremove({state}){\n        document.removeEventListener('click', state.close)\n    },\n    oninit({state, attrs: {data, arrivalProp, departureProp}}){\n        state.show = stream(false)\n\n        state.toggle = (e) => {\n            if (document.activeElement.classList.contains('date-range-input') && !state.show()){\n                state.show(!state.show())\n                m.redraw()\n            }\n        }\n\n        state.close = () => {\n            state.show(false)\n            m.redraw()\n        }\n\n        document.addEventListener('click', state.close)\n\n        const date = new Date()\n        date.setDate(1)\n        date.setHours(0,0,0,0)\n\n        state.monthOne = stream(date)\n        state.monthTwo = state.monthOne.map(() => {\n            return nextMonth(state.monthOne())\n        })\n\n        state.months = state.monthTwo.map(() => {\n            return [\n                {\n                    month: state.monthOne,\n                    id: '1',\n                    key: state.monthOne().getTime(),\n                },\n                {\n                    month: state.monthTwo,\n                    id: '2',\n                    key: state.monthTwo().getTime(),\n                }\n            ]\n        })\n\n        state.arrival = date => {\n            if (date !== undefined){\n                data[arrivalProp] = date\n            } else {\n                return data[arrivalProp]\n            }\n        }\n\n        state.departure = date => {\n            if (date !== undefined){\n                data[departureProp] = date\n            } else {\n                return data[departureProp]\n            }\n        }\n    },\n    view ({state: {monthOne, monthTwo, months, show, toggle, movement, arrival, departure}, attrs: {placeholder}}) {\n        return m('.date-range', {\n            onclick: e => e.stopPropagation() \n        }, [\n            m('input.date-range-input', {\n                class: show() ? 'focus' : '',\n                placeholder,\n                onclick: toggle,\n                onfocus: toggle\n            }),\n            //show() &&\n            m('.calendar-display', {\n                onbeforeremove({dom}){\n                    dom.classList.add(\"fade-out\")\n                    return new Promise(resolve => {\n                        setTimeout(resolve, 200)\n                    })\n                }\n            }, [\n                m('.triangle'),\n                m('button.previous-month.month-navigation', {\n                    onclick(){\n                        monthOne(prevMonth(monthOne()))\n                    }\n                }, 'Prev'),\n\n                m('button.next-month.month-navigation', {\n                    onclick(){\n                        monthOne(nextMonth(monthOne()))\n                    }\n                }, 'Next'),\n\n                m('.year', monthOne().getFullYear()),\n\n                m('.months-container', months().map(mon => {\n                    return m(month, {\n                        month: mon.month,\n                        id: mon.id, \n                        key: mon.key,\n                        arrival,\n                        departure\n                    })\n                }))\n            ])\n        ])\n    }\n}","import m from 'mithril'\nimport './demo.css'\nimport dateRange from '../lib/date-range-picker'\n\nconst trip = {\n    location: 'Hull',\n    arrivalDate: null,\n    departureDate: null\n}\n\nconst demo = {\n    view(vnode) {\n       return m('.page-date-range', [\n           m(dateRange, {\n               placeholder: 'Arrival/Departure',\n               data: trip,\n               arrivalProp: 'arrivalDate',\n               departureProp: 'departureDate'\n           }),\n           m('.json', JSON.stringify(trip))\n       ])\n    }\n}\n\nm.mount(document.body, demo)\n\n"],"sourceRoot":""}